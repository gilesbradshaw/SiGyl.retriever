(function(){define(["jquery","knockout","listenToken","observableExtensions.extender","linq"],function(a,c,e,b,d){return c.extenders.select=function(g,f){g.select=function(h,k){var i,j,l,m,n,o,p;l=void 0;p=void 0;m=f.entityType().name;if(h.split(".")[0]==="_histories"){i="RuntimeId";j=h.split(".")[1];if(!a.Enumerable.From(f.entityType().histories).Any(function(q){return q.name===j})){throw"select did not find a history of type "+j+" for "+m}o=new f.observableExtensions.observableExtensions.history.rootObservable(0,j)}else{i=a.Enumerable.From(f.entityType().navigationProperties).Single(function(q){return q.name===h}).to.referentialConstraints[0].to[0];o=new f.manyObservable({Id:function(){return 0}},f.entityType().name,h,f.entityType()).base()()}n=o._onDisposed;o._onDisposed=function(){if(n){n()}if(p){p.dispose();return p=void 0}};if(k){k(g)}o._extendListenToken(function(q){return function(){var r,s,t;r=true;if(!p){p=g.subscribe(function(u){if(p){l.recycling=r;l.relistening=true;r=false;f.listener.listen(l);return f.listener.cycle()}})}l=q();s=l._modifyCollectionRetrieveRequest;l._modifyCollectionRetrieveRequest=function(u){if(s){s(u)}if(g()){o=a.Enumerable.From(u).Single(function(v){return v.Name==="id"}).Values=[{Name:"id",Value:g().Id()}]}return o};t=l._modifyRetrieveRequest;l._modifyRetrieveRequest=function(u){if(t){t(u)}if(g()){o=a.Enumerable.From(u).Single(function(v){return v.Name==="id"}).Values=[{Name:"id",Value:g().Id()}]}return o};l.canAddData=function(u,v){var w;if(u.type===(""+m+"."+h)){w=[];l._modifyCollectionRetrieveRequest(w);o=a.Enumerable.From(a.Enumerable.From(w).Single(function(x){return x.Name==="id"}).Values).Any((function(x){return function(y){return y.Name==="id"&&y.Value===u.value[i]()}})(this));return o}};return l}})();return function(){return o}};return g}})}).call(this);
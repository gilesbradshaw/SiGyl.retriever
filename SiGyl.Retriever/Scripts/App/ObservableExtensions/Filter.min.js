(function(){define(["jquery","knockout","listenToken","observableExtensions.extender","linq"],function(a,d,f,b,e){var c,g;c=function(h){if(!h){return new Date(Date.parse("1/1/2200"))}else{if(typeof h==="string"){return new Date(Date.parse(h.split(".")[0]))}else{return h}}};g=function(k,l,h,i,j){k.currentOperator(h()||b.getMyFilterValue(k,"filter",l,"operator"));k.currentProperty(i()||b.getMyFilterValue(k,"filter",l,"property"));k.currentValue(j()||b.getMyFilterValue(k,"filter",l,"value"));return{Name:"filter",Id:l,Values:[{Name:"property",Value:k.currentProperty()},{Name:"operator",Value:k.currentOperator()},{Name:"value",Value:k.currentValue()}]}};return d.extenders.filter=function(i,h){i.filter=function(q,n){var m,o,p,r,s,t,j,k,l;k=d.observable();j=d.observable();l=d.observable();m=h.entityType();o=void 0;p=void 0;r=i._addPagerInfo;i._addPagerInfo=function(u){if(r){r(u)}p=b.getMyPagerInfo(i,"filter",q);p.operator=d.observable();p.currentOperator=d.observable();p.property=d.observable();p.currentProperty=d.observable();p.value=d.observable();p.currentValue=d.observable();p.properties=a.Enumerable.From(m.properties).Select(function(v){return v.name}).ToArray();if(p.filter){p.set=function(){u(this);o.listen();return o.cycle()};p.operator(b.getMyFilterValue(p,"filter",q,"operator"));p.currentOperator(b.getMyFilterValue(p,"filter",q,"operator"));p.property(b.getMyFilterValue(p,"filter",q,"property"));p.currentProperty(b.getMyFilterValue(p,"filter",q,"property"));p.value(b.getMyFilterValue(p,"filter",q,"value"));p.currentValue(b.getMyFilterValue(p,"filter",q,"value"));p.values=d.pureComputed(function(){var v;if(p.property()){v=a.Enumerable.From(m.properties).Single(function(w){return w.name===p.property()});return v.Values}});p.operators=d.pureComputed(function(){if(p.values()){return["==","!="]}else{return[">",">=","==","<=","<","!="]}});p.url=d.pureComputed(function(){return b.getMyFilterUrl(p.filter,"filter",q,{property:p.property(),operator:p.operator(),value:p.value()})})}return p.isVisible(!k())};i._addPagerInfo.source="filter";t=void 0;s=i._onDisposed;i._onDisposed=function(){if(s){s()}if(t){return t.dispose()}};o=void 0;if(n){n(i)}i._extendListenToken(function(u){return function(){var v,w,x;o=u();v=o.canAddData;o.canAddData=function(y,z){var A,B,C,D,E;if(v(y,z)){B=k()||b.getMyFilterValue(p,"filter",q,"property");A=j()||b.getMyFilterValue(p,"filter",q,"operator");E=l()||b.getMyFilterValue(p,"filter",q,"value");if(B){D=a.Enumerable.From(m.properties).Single(function(F){return F.name===B}).clrType;if(D==="DateTime"){if(y.value[B]()){C=c(y.value[B]())}if(E){E=c(E)}}else{C=y.value[B]()}if(typeof C==="number"){E=Number(E)}if(typeof C==="boolean"){E=E===true||E==="true"}if(E===null){E=void 0}if(C===null){C=void 0}if(!((!E&&D==="DateTime"&&(A==="<="||A==="<"))||(function(){switch(A){case">":return C>E;case">=":return C>=E;case"==":return C===E;case"<=":return C<=E;case"<":return C<E;case"!=":return C!==E}})())){z.splice(z.indexOf(y.value),1);return false}}return true}};x=o._modifyRetrieveRequest;o._modifyRetrieveRequest=function(y){if(x){x(y)}return y.push(g(p,q,j,k,l))};w=o._modifyCollectionRetrieveRequest;o._modifyCollectionRetrieveRequest=function(y){if(w){w(y)}return y.push(g(p,q,j,k,l))};return o}});return function(v,u,w){k(d.utils.unwrapObservable(v));j(d.utils.unwrapObservable(u));l(d.utils.unwrapObservable(w));if(d.isObservable(w)){t=w.subscribe(function(y){l(y);if(o){return o.listen()}})}return i}};return i}})}).call(this);
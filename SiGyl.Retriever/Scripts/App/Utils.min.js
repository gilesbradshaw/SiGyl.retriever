(function(){define(["linq"],function(a){var b;b={process:function(h,f){var g,c,d,e;if(h){if(h.length!==void 0){e=[];for(c=0,d=h.length;c<d;c++){g=h[c];e.push(f(g))}return e}else{return f(h)}}},processModel:function(c){c.entityTypes={};b.process(c.entityType,function(d){d.model=c;d.data={};c.entityTypes[d.name]=d;d.navigationProperties={};return b.process(d.navigationProperty,function(e){return d.navigationProperties[e.name]=e})});c.associations={};b.process(c.association,function(d){return c.associations[d.name]=d});return c},getPrincipal:function(d,f){var c,e,g,h,i;e=d.navigationProperties[f];h=e.relationship.split(".")[1];c=d.model.associations[h];g=c.referentialConstraint.principal;return i={id:function(){return g.propertyRef.name},end:function(){return a.From(c.end).Single(function(j){return j.role===g.role})},type:function(){return i.end().type.split(".")[2]},entityType:function(){return d.model.entityTypes[i.type()]}}},getDependent:function(d,f){var c,e,g,h,i;e=d.navigationProperties[f];h=e.relationship.split(".")[1];c=d.model.associations[h];g=c.referentialConstraint.dependent;return i={id:function(){return g.propertyRef.name},end:function(){return a.From(c.end).Single(function(j){return j.role===g.role})},type:function(){return i.end().type.split(".")[2]},entityType:function(){return d.model.entityTypes[i.type()]}}}};return{initMe:function(){},getMe:function(){return b}}})}).call(this);
(function(){define(["Q","linq","breeze","knockout","breezeEntityManagers"],function(e,d,a,c,b){return{get:function(g){var f;f=e.defer();b.done(function(h){var i;i=e.all(d.From(g).Select(function(m){var j,k,l,n,o;o=e.defer();k=h.getType(m.type);n=k.query;j=d.From(m.ids).Select(function(p){return a.Predicate.create("Id","==",p.Id)}).ToArray();n=n.where(a.Predicate.or(j));l=k.manager.executeQuery(n);l.done(function(p){return o.resolve({Type:m.type,Ids:d.From(p.results).Select(function(q){return{Key:q.Id(),ParameterGroups:d.From(d.From(m.ids).Single(function(r){return r.Id.toString()===q.Id().toString()}).ParameterGroups).Select(function(r){return{Name:r.Name,Value:[q]}}).ToArray()}}).ToArray()})});l["catch"](function(){return o.reject()});return o.promise}).ToArray());i.done(function(j){return f.resolve(j)});return i["catch"](function(){return f.reject()})});return f.promise},getCollection:function(f){var g;g=e.defer();b.done(function(h){var i;i=e.all(d.From(f).Select(function(m){var j,k,l;l=e.defer();k=h.getCollectionType(m.type);j=e.all(d.From(m.collections).Select(function(n){var o,p,q;o=e.defer();q=k.collectionManager(n.collection);p=e.all(d.From(n.ids).Select(function(r){var s,t,u;s=e.defer();u=q.query(r.Id);t=e.all(d.From(r.ParameterGroups).Select(function(I){var E,F,G,H,J,K,L,M,v,w,x,y,z,A,B,C,D;J=e.defer();B=d.From(I.Parameters).Where(function(N){return N.Name==="filter"}).ToArray();for(v=0,y=B.length;v<y;v++){H=B[v];K=d.From(H.Values).Single(function(N){return N.Name==="property"}).Value;E=d.From(H.Values).Single(function(N){return N.Name==="operator"}).Value;M=d.From(H.Values).Single(function(N){return N.Name==="value"}).Value;u=u.where(K,E,M)}C=d.From(I.Parameters).Where(function(N){return N.Name==="order"}).ToArray();for(w=0,z=C.length;w<z;w++){H=C[w];if(d.From(H.Values).Any(function(N){return N.Name==="isDescending"&&N.Value})){F="orderByDesc"}else{F="orderBy"}L=d.From(H.Values).Single(function(N){return N.Name==="propertyName"}).Value;u=u[F](L)}D=d.From(I.Parameters).Where(function(N){return N.Name==="page"}).ToArray();for(x=0,A=D.length;x<A;x++){H=D[x];G=d.From(H.Values).Single(function(N){return N.Name==="page"}).Value;u=u.skip(G*10).take(10)}k.manager.executeQuery(u)["catch"](function(){return J.reject()}).done(function(N){return J.resolve({Name:I.Name,Collection:{data:N.results,metaData:{count:N.inlineCount}}})});return J.promise}).ToArray());t["catch"](function(){return s.reject()}).done(function(v){return s.resolve({Key:r.Id,ParameterGroups:v})});return s.promise}).ToArray());p["catch"](function(){return o.reject()}).done(function(r){return o.resolve({Collection:n.collection,Ids:r})});return o.promise}).ToArray());j["catch"](function(){return l.reject()}).done(function(n){return l.resolve({Type:m.type,Collections:n})});return l.promise}).ToArray());i.done(function(j){return g.resolve(j)});return i["catch"](function(){return g.reject()})});return g.promise}}})}).call(this);